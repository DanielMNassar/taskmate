{% extends "base.html" %}

{% block title %}TaskMate â€” Find Providers{% endblock %}

{% block content %}

{% if error %}
<div class="alert alert-error">
  {{ error }}
</div>
{% endif %}

<!-- HERO SECTION -->
<div style="margin-bottom: 3rem;">
  <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 24px; padding: 4rem 2.5rem; color: white; position: relative; overflow: hidden; box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);">
    <div style="position: relative; z-index: 1;">
      <div style="margin-bottom: 1.5rem;">
        <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1.25rem; border-radius: 50px; font-size: 0.875rem; font-weight: 600; backdrop-filter: blur(10px);">
          ğŸ“ Lebanon â€¢ Location-based providers
        </span>
      </div>
      
      <h1 style="font-size: 2.75rem; font-weight: 800; margin-bottom: 1rem; color: white;">
        Book a trusted service in minutes
      </h1>
      
      <p style="font-size: 1.125rem; color: rgba(255, 255, 255, 0.95); margin-bottom: 2rem; max-width: 600px;">
        Find nearby electricians, plumbers, mechanics, and more â€” request a service, track status, pay, then review.
      </p>
      
      <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="#providers" class="btn" style="background: white; color: #667eea;">
          ğŸ” Browse providers
        </a>
        <a href="/ui/requests" class="btn btn-ghost">
          ğŸ§¾ My requests
        </a>
      </div>
      
      <div style="display: flex; gap: 1.5rem; margin-top: 2.5rem; flex-wrap: wrap;">
        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.9375rem;">
          <span>âœ…</span> Verified professionals
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.9375rem;">
          <span>âš¡</span> Fast requests
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.9375rem;">
          <span>ğŸ’³</span> Secure payments
        </div>
      </div>
    </div>
  </div>
</div>

<!-- MAIN GRID -->
<div class="grid grid-2" id="providers" style="margin-bottom: 3rem;">
  <!-- FILTERS SIDEBAR -->
  <aside>
    <div class="card filters-card">
      <div class="card-header">
        <div style="font-size: 1.125rem; font-weight: 700; color: #1a202c;">
          ğŸ§­ Find providers
        </div>
        <div style="font-size: 0.875rem; color: #718096; margin-top: 0.25rem;">
          Filter by area & category
        </div>
      </div>

      <div class="card-body">
        <form
          hx-post="/ui/providers/search"
          hx-target="#providers-results"
          hx-trigger="submit"
          hx-swap="innerHTML"
          class="form"
        >
          <div>
            <label class="label" for="area_id">Service Area</label>
            <select class="select" id="area_id" name="area_id">
              <option value="">All Areas</option>
              {% for area in areas %}
                <option value="{{ area.area_id }}">
                  {{ area.city }}, {{ area.district }} ({{ area.postal_code }})
                </option>
              {% endfor %}
            </select>
            <small style="color: #718096; font-size: 0.8125rem; margin-top: 0.5rem; display: block;">
              Tip: choose an area first to narrow results.
            </small>
          </div>

          <div>
            <label class="label" for="category_id">Service Category</label>
            <select class="select" id="category_id" name="category_id">
              <option value="">All Categories</option>
              {% for category in categories %}
                <option value="{{ category.category_id }}">
                  {{ category.name }}
                </option>
              {% endfor %}
            </select>
            <small style="color: #718096; font-size: 0.8125rem; margin-top: 0.5rem; display: block;">
              Optional: pick a category to refine providers.
            </small>
          </div>

          <button class="btn" type="submit" style="width: 100%; margin-top: 0.5rem;">
            ğŸ” Search providers
          </button>
        </form>
      </div>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <div>
    <!-- REQUEST FORM SECTION -->
    <div class="card" style="margin-bottom: 2rem;">
      <div class="card-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="font-size: 1.125rem; font-weight: 700; color: #1a202c;">
            ğŸ“ Request service
          </div>
          <span style="background: #e2e8f0; color: #4a5568; padding: 0.375rem 0.875rem; border-radius: 8px; font-size: 0.8125rem; font-weight: 600;">
            Step 2
          </span>
        </div>
      </div>

      <div class="card-body" id="request-form-container">
        <div class="empty">
          <div class="empty-icon">ğŸ‘†</div>
          <div class="empty-title">Select a provider to load the form</div>
          <div class="empty-text">
            Search on the left, then click "Request Service" on a provider card.
          </div>
        </div>
      </div>
    </div>

    <!-- PROVIDERS RESULTS -->
    <div class="card">
      <div class="card-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="font-size: 1.125rem; font-weight: 700; color: #1a202c;">
            ğŸ‘¥ Available providers
          </div>
          <span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0.375rem 0.875rem; border-radius: 8px; font-size: 0.8125rem; font-weight: 600;">
            Lebanon
          </span>
        </div>
      </div>

      <div class="card-body" style="min-height: 300px;">
        <div id="providers-results">
          <div class="empty">
            <div class="empty-icon">ğŸ”</div>
            <div class="empty-title">Results appear here (HTMX)</div>
            <div class="empty-text">
              Choose filters and press <b>Search providers</b>.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- HOW IT WORKS -->
<div style="background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); border-radius: 20px; padding: 2.5rem; margin-bottom: 3rem;">
  <h3 style="text-align: center; margin-bottom: 2.5rem; color: #1a202c;">How It Works</h3>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
    <div style="text-align: center;">
      <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: white; font-size: 1.75rem; font-weight: 800;">
        1
      </div>
      <div style="font-weight: 700; font-size: 1.125rem; margin-bottom: 0.5rem; color: #1a202c;">Search</div>
      <div style="color: #718096;">Pick area & category</div>
    </div>
    
    <div style="text-align: center;">
      <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: white; font-size: 1.75rem; font-weight: 800;">
        2
      </div>
      <div style="font-weight: 700; font-size: 1.125rem; margin-bottom: 0.5rem; color: #1a202c;">Request</div>
      <div style="color: #718096;">Submit the details</div>
    </div>
    
    <div style="text-align: center;">
      <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: white; font-size: 1.75rem; font-weight: 800;">
        3
      </div>
      <div style="font-weight: 700; font-size: 1.125rem; margin-bottom: 0.5rem; color: #1a202c;">Pay & Review</div>
      <div style="color: #718096;">Finish the job</div>
    </div>
  </div>
</div>

{% endblock %}
